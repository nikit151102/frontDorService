<div style="display: flex;
    justify-content: space-between;
    background: #f8f9fa;
    border-radius: 20px;
    padding: 7px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    margin-bottom: 10px;">

    <div>
        <span style="color: #101010c7; font-size: 20px;">Контрагенты</span>
        <div class="menu">
            <button class="menu-item" [ngClass]="{'active': selectedComponent === 'invoices'}"
                (click)="showComponent('invoices')">
                Фактуры
            </button>
            <button class="menu-item" [ngClass]="{'active': selectedComponent === 'products'}"
                (click)="showComponent('products')">
                Товары
            </button>
        </div>
    </div>
    <div class="financial-info">
        <div class="info-card" *ngIf="invoicesService.totalInfo && invoicesService.totalInfo.totalCount">
            <div class="info-value count">
                {{invoicesService.totalInfo.totalCount}}
            </div>
            <div class="info-label">Записей</div>
        </div>

        <div class="info-card" *ngIf="invoicesService.totalInfo && invoicesService.totalInfo.totalIncomeSum">
            <div class="info-value income">
                {{invoicesService.totalInfo.totalIncomeSum | number:'1.2-2'}}
            </div>
            <div class="info-label">Приход</div>
        </div>

        <div class="info-card" *ngIf="invoicesService.totalInfo && invoicesService.totalInfo.totalExpenseSum ">
            <div class="info-value expense">
                {{invoicesService.totalInfo.totalExpenseSum | number:'1.2-2'}}
            </div>
            <div class="info-label">Расход</div>
        </div>

        <div class="info-card"
            *ngIf="counterpartyData.partnerSaldoData && counterpartyData.partnerSaldoData.totalSaldo">
            <div class="info-value" [ngClass]="{
      'negative': counterpartyData.partnerSaldoData.totalSaldo < 0,
      'positive': counterpartyData.partnerSaldoData.totalSaldo >= 0
    }">
                {{counterpartyData.partnerSaldoData.totalSaldo | number:'1.2-2'}}
            </div>
            <div class="info-label">Сальдо</div>
        </div>
    </div>
    <div class="counterparty-card-wrapper">
        <div class="counterparty-card" *ngIf="counterpartyData">
            <h2 class="counterparty-name">{{counterpartyData.fullName}}</h2>

            <div class="counterparty-details">
                <span class="counterparty-shortname">{{counterpartyData.shortName}}</span>
                <span class="counterparty-tax">{{getTaxValue(counterpartyData.tax)}}</span>
            </div>

            <button class="details-button" (click)="toggleDetails()">
                {{showDetails ? 'Свернуть' : 'Подробнее'}}
            </button>
        </div>

        <div class="details-panel" *ngIf="showDetails">
            <div class="details-content">
                <div class="detail-row">
                    <span class="detail-label">Сальдо:</span>
                    <span class="detail-value" [ngClass]="{
                        'negative': counterpartyData.partnerSaldoData.totalSaldo < 0,
                        'positive': counterpartyData.partnerSaldoData.totalSaldo >= 0
                    }">
                        {{counterpartyData.partnerSaldoData.totalSaldo}}
                    </span>

                </div>
                <div class="detail-row">
                    <span class="detail-label">ИНН:</span>
                    <span class="detail-value">{{counterpartyData.inn}}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Создатель:</span>
                    <span class="detail-value">{{counterpartyData.creatorName}}</span>
                </div>
            </div>
        </div>
    </div>
</div>


<div style="    background: #f8f9fa;
    border-radius: 20px;
    padding: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);">


    <div *ngIf="selectedComponent === 'invoices'">
        <app-invoices [selectedComponent]="selectedComponent" [counterpartyId]="counterpartyId"
            [counterpartyData]="counterpartyData" [columns]="columnsInvoices" [buttonConfigs]="getButtonConfigs()"
            [totalInfoColumn]="totalInfoColumnInvoices" [endpoint]="'api/CommercialWork/DocInvoice'"
            [modelForm]="['dateTime','number','productList.name','productList.quantity','productList.amount','productList.sumAmount','productList.measurementUnit', 'productList.productTarget', 'status']"></app-invoices>
    </div>
    <div *ngIf="selectedComponent === 'products'">
        <app-products [counterpartyId]="counterpartyId" [selectedComponent]="selectedComponent" [columns]="columns"
            [totalInfoColumn]="totalInfoColumn" [endpoint]="'api/CommercialWork/Product/Filter'"
            [productsServ]="productsService"></app-products>
    </div>


</div>