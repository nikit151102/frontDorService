<div class="date-filter-sort">
    <a (click)="isTest = true">
        <img src="svgs/dots_three_vertical.svg" alt="" width="30px">
        <span *ngIf="selectedFilter" style="    background: #b1d0ff;
    border-radius: 50%;
    padding: 6px;
    position: absolute;
    top: 0px;
    right: -10px;
    font-size: 13px;"> +1</span>
    </a>
    <div class="filter-dropdown" *ngIf="isTest">
        <!-- Поле для выбора даты -->
        <div class="date-box">

            <input type="text" [(ngModel)]="selectedDate" placeholder="" readonly #dateInput
                [ngStyle]="{'width': '200px', 'background': '#ffffff', 'border': '1px solid #007BFF', 'transition': 'all 0.3s ease'}"
                [ngClass]="{'search-expanded': true}"
                *ngIf="dateValue.length> 0 || startDate.length>0 ||  endDate.length>0" />

        </div>

        <span class="block"> Фильтры</span>
        <div style="display: flex; gap: 10px;">

            <!-- Выпадающий список типов фильтра -->
            <div style="display: flex;
                        flex-direction: row;
                        gap: 10px;">
                <div>
                    <label *ngFor="let filter of ['Равно', 'До даты', 'После даты', 'Между датами']">
                        <input type="radio" [checked]="selectedFilter === filter" (change)="onFilterChange(filter)" />
                        {{ filter }}
                    </label>

                </div>

                <!-- Календарь или календарь для выбора диапазона -->
                <div class="calendar-container" *ngIf="showCalendar">
                    <ng-container [ngSwitch]="selectedFilter">
                        <!-- Равно -->
                        <div *ngSwitchCase="'Равно'">
                            <input type="date" [(ngModel)]="dateValue" (change)="onDateChange()" #dateInput
                                (click)="openDatePicker(dateInput)" />
                        </div>

                        <!-- До даты -->
                        <div *ngSwitchCase="'До даты'">
                            <input type="date" [(ngModel)]="dateValue" (change)="onDateChange()" #dateInput
                                (click)="openDatePicker(dateInput)" />
                        </div>

                        <!-- После даты -->
                        <div *ngSwitchCase="'После даты'">
                            <input type="date" [(ngModel)]="dateValue" (change)="onDateChange()" #dateInput
                                (click)="openDatePicker(dateInput)" />
                        </div>

                        <!-- Между датами -->
                        <div *ngSwitchCase="'Между датами'">
                            <input type="date" [(ngModel)]="startDate" (change)="onDateChange()" #startDateInput
                                (click)="openDatePicker(startDateInput)" />
                            <span>по</span>
                            <input type="date" [(ngModel)]="endDate" (change)="onDateChange()" #endDateInput
                                (click)="openDatePicker(endDateInput)" />
                        </div>
                    </ng-container>
                </div>
            </div>

        </div>

        <button *ngIf="selectedFilter" class="btn-clear-filter" (click)="resetFilter()">
            Сбросить фильтр
        </button>



        <span class="block"> Сортировка</span>
        <div>
            <button class="sort-btn" (click)="toggleSort('asc')">
                <svg *ngIf="sortOrder === 'asc'" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24">
                    <path
                        d="M8,5.70710678 L8,19.508331 C8,19.7844734 7.77614237,20.008331 7.5,20.008331 C7.22385763,20.008331 7,19.7844734 7,19.508331 L7,5.70710678 L4.85355339,7.85355339 C4.65829124,8.04881554 4.34170876,8.04881554 4.14644661,7.85355339 C3.95118446,7.65829124 3.95118446,7.34170876 4.14644661,7.14644661 L7.14644661,4.14644661 C7.34170876,3.95118446 7.65829124,3.95118446 7.85355339,4.14644661 L10.8535534,7.14644661 C11.0488155,7.34170876 11.0488155,7.65829124 10.8535534,7.85355339 C10.6582912,8.04881554 10.3417088,8.04881554 10.1464466,7.85355339 L8,5.70710678 Z M12.5,6 C12.2238576,6 12,5.77614237 12,5.5 C12,5.22385763 12.2238576,5 12.5,5 L20.5,5 C20.7761424,5 21,5.22385763 21,5.5 C21,5.77614237 20.7761424,6 20.5,6 L12.5,6 Z M12.5,10 C12.2238576,10 12,9.77614237 12,9.5 C12,9.22385763 12.2238576,9 12.5,9 L18.5,9 C18.7761424,9 19,9.22385763 19,9.5 C19,9.77614237 18.7761424,10 18.5,10 L12.5,10 Z M12.5,14 C12.2238576,14 12,13.7761424 12,13.5 C12,13.2238576 12.2238576,13 12.5,13 L16.5,13 C16.7761424,13 17,13.2238576 17,13.5 C17,13.7761424 16.7761424,14 16.5,14 L12.5,14 Z M12.5,18 C12.2238576,18 12,17.7761424 12,17.5 C12,17.2238576 12.2238576,17 12.5,17 L14.5,17 C14.7761424,17 15,17.2238576 15,17.5 C15,17.7761424 14.7761424,18 14.5,18 L12.5,18 Z" />
                </svg>
                Сортировать по возрастанию
            </button>
            <button class="sort-btn" (click)="toggleSort('desc')">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path
                        d="M6.90365714,19.8034496 C6.81268627,19.9276666 6.66576323,20.008331 6.5,20.008331 C6.33423677,20.008331 6.18731373,19.9276666 6.09634286,19.8034496 L3.14644661,16.8535534 C2.95118446,16.6582912 2.95118446,16.3417088 3.14644661,16.1464466 C3.34170876,15.9511845 3.65829124,15.9511845 3.85355339,16.1464466 L6,18.2928932 L6,4.5 C6,4.22385763 6.22385763,4 6.5,4 C6.77614237,4 7,4.22385763 7,4.5 L7,18.2928932 L9.14644661,16.1464466 C9.34170876,15.9511845 9.65829124,15.9511845 9.85355339,16.1464466 C10.0488155,16.3417088 10.0488155,16.6582912 9.85355339,16.8535534 L6.90365714,19.8034496 L6.90365714,19.8034496 Z M12.5,6 C12.2238576,6 12,5.77614237 12,5.5 C12,5.22385763 12.2238576,5 12.5,5 L20.5,5 C20.7761424,5 21,5.22385763 21,5.5 C21,5.77614237 20.7761424,6 20.5,6 L12.5,6 Z M12.5,10 C12.2238576,10 12,9.77614237 12,9.5 C12,9.22385763 12.2238576,9 12.5,9 L18.5,9 C18.7761424,9 19,9.22385763 19,9.5 C19,9.77614237 18.7761424,10 18.5,10 L12.5,10 Z M12.5,14 C12.2238576,14 12,13.7761424 12,13.5 C12,13.2238576 12.2238576,13 12.5,13 L16.5,13 C16.7761424,13 17,13.2238576 17,13.5 C17,13.7761424 16.7761424,14 16.5,14 L12.5,14 Z M12.5,18 C12.2238576,18 12,17.7761424 12,17.5 C12,17.2238576 12.2238576,17 12.5,17 L14.5,17 C14.7761424,17 15,17.2238576 15,17.5 C15,17.7761424 14.7761424,18 14.5,18 L12.5,18 Z" />
                </svg>
                Сортировать по убыванию
            </button>

        </div>
    </div>




</div>